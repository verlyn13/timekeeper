# Documentation Deduplication Strategy

This document outlines the strategy for maintaining non-duplicative documentation across the Timekeeper project. Following these guidelines will ensure that information is well-organized, maintainable, and follows the DRY (Don't Repeat Yourself) principle.

## Documentation Types and Their Purposes

| Documentation Type | Purpose                                                 | Location               |
| ------------------ | ------------------------------------------------------- | ---------------------- |
| Theory             | Mathematical foundations, definitions, theorems, proofs | `docs/theory/`         |
| Implementation     | Code structure, implementation approach, algorithms     | `docs/implementation/` |
| Research           | Hypotheses, experiments, results                        | `docs/research/`       |
| API                | Function signatures, parameters, return types           | Generated by Sphinx    |
| Examples           | Practical usage patterns, tutorials                     | `docs/examples/`       |
| Memory Bank        | Project context, decisions, progress                    | `memory-bank/`         |

## Core Principles for Avoiding Duplication

### 1. Single Source of Truth

Each concept or piece of information should be defined in exactly one location:

- Mathematical definitions belong in theory documentation
- Implementation details belong in implementation documentation
- API usage belongs in examples or API documentation

### 2. Use Cross-References Instead of Duplication

Instead of copying information between documents, use explicit cross-references:

```markdown
For more details on the mathematical foundation, see [Temporal Universe](../theory/temporal_universe.md).
```

In code docstrings:

```python
"""
See Also
--------
docs/theory/temporal_universe.md : Definition of the temporal universe
"""
```

### 3. Follow the Referencing Hierarchy

Information should flow down the hierarchy, with higher levels referencing lower levels:

```
Theory → Implementation → API → Examples
```

Each level should reference concepts from levels above it rather than reproducing them.

### 4. Bidirectional Traceability

While information flows down the hierarchy, maintain bidirectional traceability through explicit references:

- Theory documents should link to their implementations
- Implementation documents should link to their theory foundations
- API documentation should reference both theory and implementation
- Examples should reference API documentation

## Implementation in Code

### API Documentation (Docstrings)

Docstrings should:

1. Briefly describe what the function/class does
2. Include mathematical notation (LaTeX) where appropriate
3. Reference theory documents for full mathematical details
4. Define parameters and return values
5. Provide minimal examples for usage

Example:

```python
def normalize(self, timepoint):
    """
    Normalize a timepoint to ensure all unit values are within valid ranges.

    This implements the normalization function $N$ defined in the Temporal
    Universe theory. See theory documentation for full mathematical details.

    Parameters
    ----------
    timepoint : dict
        Dictionary representation of a timepoint with unit names as keys.

    Returns
    -------
    dict
        Normalized timepoint where all values are within valid ranges.

    See Also
    --------
    docs/theory/temporal_universe.md : Full definition of normalization
    """
```

### Theory Documentation

Theory documents should:

1. Provide complete mathematical definitions
2. Include all relevant theorems and proofs
3. Reference the implementation documents that realize the theory
4. Avoid discussing implementation details

### Implementation Documentation

Implementation documents should:

1. Focus on how the code implements the mathematical theory
2. Reference theory documents for mathematical foundations
3. Explain design decisions and trade-offs
4. Avoid reproducing full mathematical definitions
5. Include code snippets showing implementation patterns

## Practical Application

### When Adding New Content

1. Identify the appropriate document type for the information
2. Check if similar information exists elsewhere
3. Use cross-references instead of duplication
4. Update all relevant cross-references

### When Updating Existing Content

1. Check all documents that reference the content being updated
2. Update cross-references if necessary
3. Avoid introducing duplication in the updates
4. Consider if the content still belongs in its current location

## Documentation Review Checklist

- [ ] Information is in the appropriate document type
- [ ] No duplication across document types
- [ ] Cross-references are used instead of duplication
- [ ] Bidirectional traceability is maintained
- [ ] Terminology is consistent across all documents
- [ ] LaTeX notation is consistent across all documents

## Implementation in Phase 2

As we implement the Phase 2 integration tests, docstring enhancements, and examples:

1. Integration tests should focus on testing functionality, not explaining theory
2. Docstrings should reference theory documents rather than reproduce them
3. Examples should demonstrate usage patterns without duplicating API documentation
4. All new documentation should follow the deduplication principles outlined here

This approach will result in documentation that is more maintainable, consistent, and easier to navigate, while ensuring that all necessary information is available to users of the framework.
